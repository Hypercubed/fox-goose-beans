"use strict";angular.module("riverApp",[]),angular.module("riverApp").controller("MainCtrl",["$scope","$interval",function(a,b){function c(c){j=!0,a.message=c,b.cancel(k)}function d(){if(console.log(a.time),a.time>=22)return c("Out of time");a.time%=24;var b=a.time/12*Math.PI;a.time>=11&&(a.worldStyle.backgroundColor="#000",a.worldStyle.color="#fff"),a.time<14&&(a.sunStyle.top=50-50*Math.sin(b)+"%",a.sunStyle.left=a.time/12*100+"%"),a.cloudLeft=a.time/12*50+"%",a.time+=.5}function e(){d(),k||(k=b(d,2e3))}function f(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}function g(b){for(var c=0;c<l.length;c++)if(b.indexOf(l[c][0])>-1&&b.indexOf(l[c][1])>-1)return a.message="Watch out! "+l[c][2],!1;return!0}function h(a,b){return 1==b&&a.indexOf("")<0?(c("You win!"),!0):!1}function i(b,c){if(!j){e();var d=a.field[c].slice(0),f=d[b];d[b]=a.payload,(h(d,c)||g(d))&&(a.field[c][b]=a.payload,a.payload=f)}}var j=!1;a.cloudLeft="0%",a.sunStyle={top:"50%",left:"20%"},a.worldStyle={backgroundColor:"#87CEEB"},a.time=2,d();var k=null;a.message="Get all the stuff across the river",a.boatPosition=0,a.payload="",a.field=[],a.field[0]=f(["The fox","The goose","A bag of beans"]),a.field[1]=["","",""];var l=[["The fox","The goose","The fox will eat the goose!"],["The goose","A bag of beans","The goose will eat the bag of beans!"]];a.row=function(){j||(e(),a.boatPosition=!a.boatPosition)},a.itemClick=function(b,c){return c!=a.boatPosition?void a.row():void i(b,c)}}]);